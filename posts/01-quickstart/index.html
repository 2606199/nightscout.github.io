<!DOCTYPE html><html lang="en"><head><!-- Meta--><meta charset="utf-8"><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><title>Nightscout Quickstart Guide, Draft | Nightscout, open source, DIY CGM in the cloud</title><meta name="description" content="We are not waiting!  How to build Nightscout CGM in the cloud."><meta name="keywords" content="Dexcom, CGM, cloud, nightscout, wearenotwaiting, hypo, monitor, DIY, opensource, singlepaneofglass, glucose, real-time"><meta name="author" content="Nightscout contributors"><meta name="generator" content="DocPad v6.66.0" /><meta name="viewport" content="width=device-width"><!-- Icons--><link rel="shortcut icon" href="/ico/favicon.ico"><link rel="apple-touch-icon-precomposed" sizes="144x144" href="/ico/apple-touch-icon-144-precomposed.png"><link rel="apple-touch-icon-precomposed" sizes="114x114" href="/ico/apple-touch-icon-114-precomposed.png"><link rel="apple-touch-icon-precomposed" sizes="72x72" href="/ico/apple-touch-icon-72-precomposed.png"><link rel="apple-touch-icon-precomposed" href="/ico/apple-touch-icon-57-precomposed.png"><!--if lt IE 9script(async src="http://html5shim.googlecode.com/svn/trunk/html5.js")
--><!-- Styles--><link  rel="stylesheet" href="/vendor/prettify.css" /><link  rel="stylesheet" href="/vendor/components-bootstrap/css/bootstrap.css" /><link  rel="stylesheet" href="/styles/style.css" /></head><body><!-- Markup--><!-- For now hide the navbar, single page site--><nav style="" class="navbar navbar-default navbar-fixed-top"><div class="container"><div class="navbar-header"><a href="/" class="navbar-brand">Welcome</a></div><ul class="nav navbar-nav"><li typeof="sioc:Page" about="/posts/01-quickstart" class="active"><a href="/posts/01-quickstart" property="dc:title">Nightscout Quickstart Guide, Draft</a></li><li typeof="sioc:Page" about="/posts/2014-05-25-azure-update"><a href="/posts/2014-05-25-azure-update" property="dc:title">Azure free account management</a></li></ul></div></nav><div class="container"><section id="content" class="content"><article id="page" class="page"><h1>Nightscout Quickstart Guide, Draft</h1><div class="page-content"><p>Nightscout is educational source code for monitoring estimated glucose
values from a Dexcom G4 Receiver.  The following steps describe how
one might use Nightscout.</p>
</div><h3 id="-disclaimer-"><strong>Disclaimer</strong></h3>
<blockquote>
<p>All information, thought, and code described here is intended for
informational and educational purposes only. Use of code from
github.com/rnpenguin is without warranty or support of any kind.
Please review the LICENSE found within each repository for further
details. Do not use the information or code to make medical decisions.</p>
</blockquote>
<p>Most likely, you will find yourself with a broken Dexcom receiver.
The reciever&#39;s USB port was not intended to be used often.  Even
careful users report broken USB ports.</p>
<section class="block"><a id="guides-00-welcome_start"></a><div class="yielded"><h2><a href="/guides/00-welcome" class="doc-link">Welcome</a></h2></div><a id="guides-00-welcome_end"></a></section><section class="block"><a id="guides-01-starting_start"></a><div class="yielded"><h2><a href="/guides/01-starting" class="doc-link">Getting started</a></h2><p>Nightscout is a project composed of several parts.</p>
</div><a id="guides-01-starting_end"></a></section><section class="block"><a id="guides-02-basic-theory_start"></a><div class="yielded"><h2><a href="/guides/02-basic-theory" class="doc-link">Basic Theory</a></h2><h2 id="basic-concept-of-operations">Basic Concept of Operations</h2>
<ol>
<li>Dexcom G4 Sensor / Transmitter sends wireless signal to Dexcom G4
Receiver</li>
<li>Dexcom G4 Receiver is connected via USB OTG (On The Go) cable to
an Android Uploader Device</li>
<li>Android Uploader Device sends data to MongoDB database somewhere
in the Cloud</li>
<li>Cloud Service hosts a Node.js server, which serves pages to
endpoint devices</li>
<li>Endpoint devices display glucose information and generate audible
alerts</li>
</ol>
<p><img src="http://i.imgur.com/qrrq27j.jpg" alt="cgm in the cloud system"></p>
<h3 id="otg-cable">OTG Cable</h3>
<p>Normally, mobile phones act as usb slaves.  This allows them to draw
power from the connected master, and allows the master to control
exchanging data such as music, pictures, and other files.
<img src="http://i.imgur.com/1MNdt83.jpg" alt="normal-usb-slave"></p>
<p>The USB <code>OTG</code> cable allows the phone to switch roles, becoming the
master side of the connection.
<img src="http://i.imgur.com/xvKULj3.jpg" alt="mobile-otg-usb-master">
This allows the mobile phone to control the Dexcom and provide power,
just like a laptop.</p>
</div><a id="guides-02-basic-theory_end"></a></section><section class="block"><a id="guides-03-overview_start"></a><div class="yielded"><h2><a href="/guides/03-overview" class="doc-link">Quick Overview</a></h2><h2 id="specific-instructions">Specific Instructions</h2>
<p>It will be easier to follow along if you print these instructions.
This document describes the steps to deploy Nightscout on the
following hardware / services:</p>
<ul>
<li>Dexcom G4 Receiver</li>
<li>Moto G phone (for uploading from the Dexcom)</li>
<li>Mongolab (for storing data on the cloud)</li>
<li>Microsoft Azure (for serving web pages)</li>
</ul>
<p>Setup should take about an hour.  Don’t skip steps, and please see
instructions at the end if you have any suggestions for improving the
clarity / correctness of these instructions.</p>
<h3 id="dexcom-g4-receiver">Dexcom G4 Receiver</h3>
<p><strong>Important: the USB jack is very fragile.</strong>
Many people have broken their jack. </p>
<ol>
<li>If a cable is plugged into the jack and the receiver is dropped
it may break</li>
<li>Repeated plugging / unplugging may cause it to break</li>
<li>Various hacks (styrofoam, fishing tackle cases, person game
system cases, pouches) have been used to protect the cable
connection.  Drilling a hole in the case above the jack and
filling it with 5 minute epoxy may provide additional mechanical
strength.</li>
</ol>
</div><a id="guides-03-overview_end"></a></section><section class="block"><a id="guides-04-phone-root-moto-g_start"></a><div class="yielded"><h2><a href="/guides/04-phone-root-moto-g" class="doc-link">Root mobile upload device</a></h2><h3 id="moto-g-phone-get-a-phone-unlock-it-and-root-it">Moto G phone – get a phone, unlock it, and root it</h3>
<ol>
<li><p>Buy the version of the phone which will work with your preferred
cellular provider</p>
<ul>
<li>Keep in mind this phone’s primary purpose is an uploader.
Because it must remain connected to the Dexcom receiver which
has a fragile USB connection, it is best to minimize its use an
actual phone.</li>
</ul>
<p>The phone will need to be unlocked and “rooted” for the software
to turn the USB power off between uploads (otherwise the Dexcom
will charge, draining the phone’s battery)
Following the unlocking and rooting instructions here:</p>
<ul>
<li><a href="http://androidadvices.com/root-moto-g-android-phone-firmware-guide/#.U1cii_ldWCk">http://androidadvices.com/root-moto-g-android-phone-firmware-guide/#.U1cii_ldWCk</a></li>
<li><a href="https://motorola-global-portal.custhelp.com/app/standalone/bootloader/unlock-your-device-b">https://motorola-global-portal.custhelp.com/app/standalone/bootloader/unlock-your-device-b</a></li>
<li><a href="http://www.technewscentral.co.uk/how-to-enable-usb-debugging-and-developer-options-in-android-4-2-and-higher-android-4-2android-4-3android-4-4/id_7250">http://www.technewscentral.co.uk/how-to-enable-usb-debugging-and-developer-options-in-android-4-2-and-higher-android-4-2android-4-3android-4-4/id_7250</a></li>
<li><a href="http://www.swedroid.se/forum/showthread.php?t=106595">http://www.swedroid.se/forum/showthread.php?t=106595</a></li>
<li><a href="http://forum.xda-developers.com/showthread.php?t=2585755">http://forum.xda-developers.com/showthread.php?t=2585755</a>  </li>
</ul>
</li>
<li><p>Set up web access (wifi, cellular)</p>
<ul>
<li>Put the phone aside for a moment, and set up MongoLab</li>
<li>Do not upgrade the Android OS or return it to factory defaults,
or the phone will need to be re-rooted.</li>
</ul>
</li>
</ol>
</div><a id="guides-04-phone-root-moto-g_end"></a></section><section class="block"><a id="guides-05-backend-mongolab_start"></a><div class="yielded"><h2><a href="/guides/05-backend-mongolab" class="doc-link">Configure Data Backend</a></h2><h3 id="mongolab">MongoLab</h3>
<p>Sign up for a free account at <a href="http://www.mongolab.com">http://www.mongolab.com</a> and</p>
<p>record the information you provide:
Create a <strong><code>user</code></strong>, a <strong><code>database</code></strong> and a <strong><code>collection</code></strong>.
Save this information:</p>
<pre><code>  account name: _______
  username: _______
  email: _______
  password: _______
  database user: _______ (e.g. sallyuser)
  database user password: _______ (e.g. sallypassword)
  Cloud Provider: _______ (e.g. amazon webservices)
  Location: ____________ (e.g. Amazon’s US East (Virginia) Region
  (us-east-1)
  Plan: Single-node (development), Sandbox
  New destination database name: _________ (e.g. nightscout)
  Add a collection: _______ (e.g. sally)
</code></pre><p>Once all has been configured, on the <code>Database summary page</code>,
<strong>copy the link</strong> under <code>To connect using a driver via the standard
URI</code>, as this will be used to configure both the Android App and the
Node.js server.  <strong>Copy and paste this string.</strong>  You will use it
several times below.
We will refer to it as your <strong><code>mongo connection uri</code></strong>.
It will look something like these examples:</p>
<pre><code>  mongodb://&lt;user&gt;:&lt;password&gt;@aabbb.mongolab.com:11111/&lt;database&gt;`
  mongodb://sallyuser:sallypassword@aabb22.mongolab.com:11111/nightscout`
</code></pre><p>Make sure you have easy access to your <code>mongo connection uri</code> and
<code>collection</code> for the following steps.</p>
<p>The 500MB free tier should be enough to store 10 years of data.</p>
</div><a id="guides-05-backend-mongolab_end"></a></section><section class="block"><a id="guides-06-android-app_start"></a><div class="yielded"><h2><a href="/guides/06-android-app" class="doc-link">Android App</a></h2><h3 id="moto-g">Moto G</h3>
<p>Compile and Install the uploader</p>
<h4 id="setup">setup</h4>
<p><a href="http://developer.android.com/sdk/installing/studio.html">Download and install Android Studio</a>,
along with any updates,</p>
<blockquote>
<p>Through the rooting procedure on the Moto G, <a href="http://developer.android.com/tools/device.html">usb debugging should
  already be enabled</a>.</p>
</blockquote>
<h4 id="start-a-new-project">Start a new project</h4>
<p>Start a new project, and <code>git</code> the
<a href="https://github.com/nightscout/dexcom-uploader.git">source code</a></p>
<h4 id="compile-and-install">Compile, and install</h4>
<p>Connect the Moto G with a USB cable, and click <strong>Run</strong> to install the
application on the Moto G.</p>
<h5 id="configure-preferences">Configure preferences</h5>
<p>Go into the settings menu in the CGM android app.  It is in the upper right
corner.  Use your your <strong><code>mongo connection uri</code></strong> from above.</p>
<p><iframe class="imgur-album" width="100%" height="550" frameborder="0" src="http://imgur.com/a/gVYWC/embed"></iframe>
With Mongolab now set up, the application should be able to start
uploading.  Connect the Dexcom receiver to the Moto G.</p>
<blockquote>
<p><strong>Important</strong>: when connecting the phone to the Dexcom, the OTG cable
plugs into the phone, and the regular USB cable plugs into the
Dexcom.  It will not work the other way, because OTG cables have
pins 4 and 5 shorted on the microusb connector, the indication to
the phone that an OTG device is connected.</p>
</blockquote>
<p>During the initial connection, there may be a pop-up asking if the app
should have permission to run / access services.  Select yes.  The app
should load, and data should start flowing to Mongolab.
Using Mongolab credentials from above, verify that data is flowing
into the database by logging into MongoLab, and inspecting the collection you
created for any documents.</p>
<p>Android Studio also provides a way to “package” the app as an apk,
which can then be attached to an email.  On Android devices, the gmail
app is smart enough to install apps which are attached to emails.  In
this way, it is very easy to deploy the app to other devices such as
tablets or micro pcs.  These are especially useful for bedside
monitoring, since they have their own source of external power.  For
more information, see:</p>
<ul>
<li><a href="http://developer.android.com/tools/publishing/publishing_overview.html">http://developer.android.com/tools/publishing/publishing_overview.html</a></li>
</ul>
</div><a id="guides-06-android-app_end"></a></section><section class="block"><a id="guides-07-web-monitor_start"></a><div class="yielded"><h2><a href="/guides/07-web-monitor" class="doc-link">Monitor CGM on the web</a></h2><h3 id="microsoft-azure-cloud-service-to-host-website-free">Microsoft Azure – cloud service to host website free</h3>
<ul>
<li><a href="https://github.com/">Sign into Github.com</a> with a free account.</li>
<li><p><a href="https://github.com/nightscout/cgm-remote-monitor/fork"><img src="http://i.imgur.com/gR4wJ24.png" alt="fork"> the cgm-remote-monitor</a></p>
</li>
<li><p>Visit <a href="http://azure.microsoft.com">http://azure.microsoft.com</a></p>
</li>
<li>Click “Try for free”</li>
<li>Enter or create username: <code>_________</code> (e.g. sally@outlook.com)</li>
<li>Enter or create password: <code>_________</code></li>
<li>Enter credit card information (will not be billed, ever, without
your permission)  </li>
<li>Go to the <a href="https://manage.windowsazure.com">Azure Portal</a>
  Create a new Azure site</li>
<li>Choose a Site Name: <code>_________</code> <code>.azurewebsites.net</code>
(e.g. <strong><code>nightscoutss</code></strong><code>.azurewebsites.net</code>)</li>
<li><p>Configure connection strings
Find the configure tab
<img src="http://i.imgur.com/dIPRHjt.png" alt="go to configure tab"></p>
<p>Find the connection strings:
<img src="http://i.imgur.com/PZjxkjE.png" alt="connection strings"></p>
<p>Create two new <strong>Custom</strong> rows.  Enter your mongo details from
before, using the <strong><code>Custom</code></strong> type, for
<code>mongo</code> and <code>mongo_collection</code> keys.
<strong>Copy and paste</strong> your <code>mongo connection uri</code> from above in the
new <code>mongo  &lt;mongo connection uri&gt;  Custom</code> row.
<img src="http://i.imgur.com/YKVGcIP.png" alt="configure connection strings">
The <code>mongo</code> key should be the <code>mongo://</code> url from the Android App.
The <code>mongo_collection</code> key should match the collection from the
MongoLab setup.</p>
</li>
</ul>
<ul>
<li>Find setup deployment from the <code>Dashboard</code> tab of the project.
<img src="http://i.imgur.com/6UnzWd4.png" alt="find setup deployment "></li>
<li>Select Github <img src="http://i.imgur.com/iczHBW6.png" alt="select github"></li>
<li>Authorize Github/Azure access.</li>
<li><p>Find <code>cgm-remote-monitor</code>:
<img src="http://i.imgur.com/KbhyIcx.png" alt="find cgm-remote-monitor repo"></p>
</li>
<li><p>Confirm, watch the site deploy, it should deploy automatically.</p>
</li>
<li><p>Verify operation by visiting the site, e.g.
<code>http://nightscoutss.azurewebsites.net</code>.</p>
</li>
<li><p>If blood glucose reaches a dangerous level, an alarm may sound and
the blood glucose value in the upper right hand corner will turn
into a red button.  Press the button to silence / acknowledge the
alarm.  This will also silence the alarm for anyone else who is
looking at the website.</p>
</li>
<li>For support, determine your Azure ftp username / password for azure
website access by following these instructions:
<a href="http://weblogs.asp.net/bleroy/archive/2012/06/12/azure-web-sites-ftp-credentials.aspx">http://weblogs.asp.net/bleroy/archive/2012/06/12/azure-web-sites-ftp-credentials.aspx</a></li>
</ul>
</div><a id="guides-07-web-monitor_end"></a></section><section class="block"><a id="guides-08-smartwatch_start"></a><div class="yielded"><h2><a href="/guides/08-smartwatch" class="doc-link">Pebble Smartwatch</a></h2><h3 id="pebble-">Pebble!</h3>
<p>The Pebble works with your main phone, eg, your iPhone.
After getting a pebble watch, install the official Pebble App.</p>
<h4 id="easy-method">Easy method</h4>
<ul>
<li>Search <strong>Watchfaces</strong> for <code>Nightscout cgm</code> and install from Pebble
App</li>
</ul>
<h4 id="medium-hard">Medium/Hard</h4>
<p>If it says <code>Coming Soon</code>, you can <em>sideload</em> the <code>pbw</code></p>
<ul>
<li><a href="/CGM.pbw">install this pbw</a></li>
</ul>
<p>If you cannot here is how to compile a new one for yourself:</p>
<ul>
<li>On your Phone, enable <code>Developer Mode</code> in the Pebble App.</li>
<li>Go to <a href="http://cloudpebble.net/">http://cloudpebble.net/</a>, sign up for free account, log in</li>
<li><p><code>Import Project</code>
<img src="http://i.imgur.com/RvnrCXA.png" alt="import project"></p>
</li>
<li><p>Enter these details</p>
<pre><code>Project Name: anything you want
Github project: github.com/nightscout/cgm-pebble
IMPORT!
</code></pre></li>
</ul>
<p>Make sure the phone is running in the Pebble App in developer mode.
To enable developer mode, go to
<code>settings -&gt; Pebble -&gt; Enable developer mode</code>.
Then open the pebble app, and enable developer mode.</p>
<ul>
<li>Go to Compilation tab</li>
<li><p>Hit <strong>Run Build</strong></p>
</li>
<li><p>If your phone is in developer mode and everything is working,
your phone will show up in a list, select the install and run:
<img src="http://i.imgur.com/WYIMaAk.png" alt="install and run"></p>
</li>
<li><p>Visit the settings menu on the phone and enter the address of your
<code>cgm-remote-monitor</code> from earlier.
<img src="http://i.imgur.com/IOoupMR.png" alt="pebble settings app">
<img src="http://i.imgur.com/Pb2DwMh.png" alt="pebble config step one">
<img src="http://i.imgur.com/YC64Sh0.png" alt="pebble config step two"></p>
</li>
</ul>
<p><img src="http://i.imgur.com/tPFMMPl.png" alt="with watch"></p>
</div><a id="guides-08-smartwatch_end"></a></section><h2 id="-pay-it-forward-"><strong>Pay it forward</strong></h2>
<p>Help a friend.  Enhance Nightscout by providing feedback, ideas,
bug-fixes, and enhancements.</p>
</article></section><hr><footer><div><h5>Contribute</h5><ul><li><a href="https:/github.com/nightscout/nightscout.github.io/edit/source/src/documents/posts/01-quickstart.html.md" class="edit github">Edit on github.com</a></li><li><a href="https:/github.com/nightscout/nightscout.github.io/blob/source/src/documents/posts/01-quickstart.html.md" class="view github">View on github.com</a></li><li><a href="http://prose.io/#nightscout/nightscout.github.io/edit/source/src/documents/posts/01-quickstart.html.md" class="edit prose">Edit on prose.io</a></li></ul></div><div>© Nightscout contributors 2014</div><div style="font-style:italic; font-size: 12px">This website was last updated at Sat May 31 2014 20:38:28 GMT+0000 (UTC)</div></footer></div><!-- Scripts--><script defer="defer"  src="/vendor/prettify.js"></script><script defer="defer"  src="/vendor/jquery/dist/jquery.js"></script><script defer="defer"  src="/vendor/components-bootstrap/js/bootstrap.js"></script><script defer="defer"  src="/vendor/log.js"></script><script defer="defer"  src="/vendor/modernizr.js"></script><script defer="defer"  src="/scripts/autolink_heading.js"></script><script defer="defer"  src="/scripts/script.js"></script></body></html>